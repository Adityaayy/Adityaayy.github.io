<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RADAR — RC Configurator</title>

  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --bg: #0a0a0c;
      --card: #1a1625;
      --accent: #8B5CF6;
      --muted: #9ca3af;
    }
    body {
      background: var(--bg);
      font-family: 'Inter', sans-serif;
      color: #f3f4f6;
    }
    .glass {
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.05);
      backdrop-filter: blur(6px);
      border-radius: 12px;
    }
    .card {
      background: var(--card);
      border-radius: 10px;
      padding: 0.6rem;
      display: flex;
      gap: 0.7rem;
      align-items: center;
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 24px rgba(139,92,246,0.2);
    }
    .card.selected {
      outline: 2px solid var(--accent);
    }
    .card.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .note {
      color: var(--muted);
      font-size: 0.85rem;
    }
    .preview {
      height: 700px;
      border-radius: 12px;
      background: #050507;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1.5rem;
    }
    .preview img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    .scroll-panel {
      max-height: calc(100vh - 280px);
      overflow-y: auto;
    }
  </style>
</head>
<body class="p-6">

  <header class="flex items-center justify-between mb-6 glass p-4">
    <div>
      <div class="text-sm text-gray-400">RADAR</div>
      <h1 class="text-xl font-semibold">RC Configurator</h1>
    </div>
    <div class="text-sm text-gray-400">Dark glass • Inter</div>
  </header>

  <!-- Preview -->
  <section class="preview glass">
    <img id="preview-img" src="images/placeholder.png" alt="Preview">
  </section>

  <!-- Options + Summary -->
  <div class="grid md:grid-cols-3 gap-6">
    <div class="md:col-span-2 scroll-panel space-y-6">

      <div class="glass p-4">
        <div class="font-medium mb-2">Motors</div>
        <div id="motor-list" class="space-y-3"></div>
      </div>

      <div class="glass p-4">
        <div class="font-medium mb-2">Drivers</div>
        <div id="driver-list" class="space-y-3"></div>
      </div>

      <div class="glass p-4">
        <div class="font-medium mb-2">Batteries</div>
        <div id="battery-list" class="space-y-3"></div>
      </div>

      <div class="glass p-4">
        <div class="font-medium mb-2">Wheels</div>
        <div id="wheel-list" class="space-y-3"></div>
      </div>

    </div>

    <!-- Summary -->
    <aside class="glass p-4">
      <div class="font-medium mb-2">Summary</div>
      <div class="flex justify-between mb-1">
        <span class="note">Total credits</span>
        <span id="credits-total">0</span>
      </div>
      <div class="flex justify-between mb-1">
        <span class="note">Remaining</span>
        <span id="credits-remaining">0</span>
      </div>
      <div class="flex justify-between mb-1">
        <span class="note">Teams</span>
        <input id="teams-input" type="number" min="1" value="12" class="bg-transparent border rounded w-16 text-center" />
      </div>
      <div class="mt-2 text-xs text-gray-400">MX1508 max 2S. 3S disabled when MX1508 selected.</div>
    </aside>
  </div>

<script>
/* === Data === */
const motors = [
  {id:1,name:"N20 — 60 RPM",credits:1,img:"images/n20.png",note:"Precise, low draw"},
  {id:2,name:"N20 — 120 RPM",credits:1,img:"images/n20.png",note:"Balanced efficiency"},
  {id:3,name:"N20 — 300 RPM",credits:2,img:"images/n20.png",note:"Faster output"},
  {id:4,name:"N20 — 500 RPM",credits:2,img:"images/n20.png",note:"High speed"},
  {id:5,name:"12V — 200 RPM",credits:3,img:"images/12vG.png",note:"High torque"},
  {id:6,name:"12V — 400 RPM",credits:3,img:"images/12vG.png",note:"Strong power"}
];
const drivers = [
  {id:1,name:"L298N",credits:1,img:"images/l298n.png",note:"Basic, cheap"},
  {id:2,name:"MX1508 (2S)",credits:2,img:"images/mx1508.png",note:"Compact, 2S max"},
  {id:3,name:"TB6612",credits:3,img:"images/tb6612.png",note:"Efficient, low heat"}
];
const batteries = [
  {id:1,name:"1S",credits:1,img:"images/1s.png",note:"USB charge"},
  {id:2,name:"2S",credits:2,img:"images/2s.png",note:"Good torque"},
  {id:3,name:"3S",credits:3,img:"images/3s.png",note:"High voltage"}
];
const wheels = [
  {id:"n20a",family:"n20",credits:1,name:"Rubber 40mm",img:"images/wheel-n20-a.png",note:"Grip"},
  {id:"n20b",family:"n20",credits:2,name:"Foam 45mm",img:"images/wheel-n20-b.png",note:"Traction"},
  {id:"12va",family:"12v",credits:1,name:"Tread 60mm",img:"images/wheel-12v-a.png",note:"Offroad"},
  {id:"12vb",family:"12v",credits:2,name:"Alloy 58mm",img:"images/wheel-12v-b.png",note:"Balanced"}
];

/* === State === */
let state = {motor:1, driver:1, battery:1, wheel:"n20a", teams:12, creditsPerTeam:8};

/* === DOM refs === */
const motorList=$("motor-list"),driverList=$("driver-list"),batteryList=$("battery-list"),wheelList=$("wheel-list");
function $(id){return document.getElementById(id)}

/* === Render cards === */
function makeCard(opt,group,disabled=false){
  const div=document.createElement("div");
  div.className="card"+(disabled?" disabled":"");
  if(state[group]===opt.id||state[group]===opt.idStr) div.classList.add("selected");
  div.innerHTML=`<img src="${opt.img}" style="width:70px;height:50px;object-fit:contain"><div><div>${opt.name}</div><div class="note">Credits: ${opt.credits}</div><div class="note">${opt.note}</div></div>`;
  div.onclick=()=>{ if(disabled) return;
    if(group==="wheel") state.wheel=opt.id; else state[group]=opt.id;
    update();
  };
  return div;
}

function render(){
  motorList.innerHTML=""; motors.forEach(m=>motorList.appendChild(makeCard(m,"motor")));
  driverList.innerHTML=""; drivers.forEach(d=>driverList.appendChild(makeCard(d,"driver")));
  batteryList.innerHTML="";
  batteries.forEach(b=>{
    const disabled=(state.driver===2 && b.id===3); // MX1508 disables 3S
    batteryList.appendChild(makeCard(b,"battery",disabled));
  });
  const fam=(state.motor<=4?"n20":"12v");
  wheelList.innerHTML=""; wheels.filter(w=>w.family===fam).forEach(w=>wheelList.appendChild(makeCard(w,"wheel")));
}

/* === Update credits & preview === */
function update(){
  render();
  const m=motors.find(x=>x.id===state.motor), d=drivers.find(x=>x.id===state.driver), b=batteries.find(x=>x.id===state.battery);
  const fam=(state.motor<=4?"n20":"12v"), w=wheels.find(x=>x.id===state.wheel && x.family===fam);
  const total=(m?.credits||0)+(d?.credits||0)+(b?.credits||0)+(w?.credits||0);
  $("credits-total").textContent=total;
  const rem=state.creditsPerTeam-total; $("credits-remaining").textContent=rem;
  $("teams-input").value=state.teams;

  // preview
  const img=$("preview-img");
  const fname=`renders/m${state.motor}d${state.driver}b${state.battery}.png`;
  img.src=fname;
  img.onerror=()=>{img.src="images/placeholder.png";}
}

/* === Inputs === */
$("teams-input").onchange=e=>{state.teams=parseInt(e.target.value||1);update()}

/* Init */
update();
</script>
</body>
</html>
