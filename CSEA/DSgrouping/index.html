<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>CSE-sec A-3rd sem — Data Analysis Case study Student Grouping</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 1.25rem; background:#f7f9fc; }
    .card { margin-bottom:1rem; }
    .locked { opacity:0.65; pointer-events:none; }
    .member-badge { margin-right:6px }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; }
    footer { font-size:0.9rem; opacity:0.8; margin-top:1.25rem; }
    .small-note { font-size:0.85rem; color:#666; }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="mb-2">CSE-sec A — 3rd Sem</h1>
    <p class="small-note">Public group scoreboard. Students enroll using their roll number (used as password). Once joined, membership locks.</p>

    <div class="row">
      <div class="col-lg-7">
        <div class="card">
          <div class="card-body">
            <h5>Public Group View</h5>
            <div id="groupsArea" class="mb-3"></div>

            <h6>Unenrolled Students</h6>
            <div id="unenrolledList" class="mb-0"></div>
          </div>
        </div>

        <div class="card" id="actionCard">
          <div class="card-body">
            <h5>Find & Join a Group</h5>
            <div class="mb-2">
              <input id="searchName" class="form-control" placeholder="Type your name (or part of it) — e.g. Aditya">
            </div>
            <div id="searchResults" class="mb-3"></div>

            <div id="joinPanel" style="display:none;">
              <h6>Login & Choose Group</h6>
              <div class="mb-2">
                <input id="rollInput" class="form-control" placeholder="Roll number (acts as password)">
              </div>

              <div class="mb-2">
                <label class="form-label">Choose an existing group or create new</label>
                <div class="input-group">
                  <select id="groupSelect" class="form-select"></select>
                  <button id="createGroupBtn" class="btn btn-outline-secondary" type="button">Create new</button>
                </div>
                <div class="small-note mt-1">New groups will be assigned the next available numeric ID.</div>
              </div>

              <div class="mb-2">
                <button id="joinBtn" class="btn btn-primary">Join</button>
                <button id="cancelJoinBtn" class="btn btn-link">Cancel</button>
              </div>
              <div id="joinMsg" class="small-note text-danger"></div>
            </div>

          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <h5>Admin / CR Controls</h5>
            <div class="mb-2">
              <label class="form-label">Import students JSON (optional)</label>
              <input id="studentsJsonInput" type="file" class="form-control" accept=".json">
              <div class="small-note mt-1">Use to replace the class list (name + roll). Format: [{ "name":"Full Name", "roll":"245805132" }, ...]</div>
            </div>
            <div class="mb-2">
              <button id="exportBtn" class="btn btn-success">Export data (groups.json)</button>
              <button id="resetBtn" class="btn btn-outline-danger">Reset local state</button>
            </div>
            <div class="small-note mt-2">After export, commit the downloaded <code>groups.json</code> to your GitHub repo for an official copy.</div>
          </div>
        </div>

      </div>

      <div class="col-lg-5">
        <div class="card">
          <div class="card-body">
            <h5>How it works</h5>
            <ol>
              <li>Student finds their name, enters roll number to verify.</li>
              <li>Choose a group (or create one). Max 4 per group.</li>
              <li>After joining, membership locks — shown publicly.</li>
              <li>CR exports <code>groups.json</code> and commits to repo for persistent public record.</li>
            </ol>
            <div class="small-note mt-2">This is client-side only — no server. Roll numbers are checked in the browser against the student list.</div>
          </div>
        </div>

        <div class="card">
          <div class="card-body">
            <h5>Quick stats</h5>
            <div><strong>Total students:</strong> <span id="totalStudents">0</span></div>
            <div><strong>Enrolled:</strong> <span id="enrolledCount">0</span></div>
            <div><strong>Groups:</strong> <span id="groupCount">0</span></div>
          </div>
        </div>

        <footer>
          <div>Made for: <strong>CSE-sec A — Data Analysis Case study</strong></div>
          <div class="mt-1">Export & commit periodically. Keep roll numbers private if needed.</div>
        </footer>
      </div>
    </div>
  </div>

<script>
/* ======= PRE-FILLED STUDENTS (extracted from provided class list PDF) =======
   NOTE: This list includes names and roll numbers from the uploaded PDF file.
   You can replace it later by importing a JSON file in admin controls.
   Source: uploaded file in conversation.
*/
let PRESET_STUDENTS = [
{"name":"ASHIQ RASOOL","roll":"245805050"},
{"name":"Aayu Kedar Ketkar","roll":"245805027"},
{"name":"Aditi Ilavajuthy","roll":"245805009"},
{"name":"ADITYA DUTTA","roll":"245805132"},
{"name":"Advik De","roll":"245805013"},
{"name":"AKSHANSH GOEL","roll":"245805118"},
{"name":"ALETI MITESH REDDY","roll":"245805334"},
{"name":"ANUSHA","roll":"245805310"},
{"name":"ANUSHA MADAN","roll":"245890070"},
{"name":"Anusha Nigam","roll":"245805011"},
{"name":"ANVI MISHRA","roll":"245805214"},
{"name":"Arisha Ashwinikumar Jaiswal","roll":"245805029"},
{"name":"ARJIT MENON","roll":"245890038"},
{"name":"ARSHI GARG","roll":"245805268"},
{"name":"ASMIT RAJ","roll":"245805356"},
{"name":"ATHARV REMESHAN","roll":"245890102"},
{"name":"BOREDDY SAI VEDESHWAR REDDY","roll":"245805456"},
{"name":"DEVASHISH NAIDU REVALLA","roll":"123135673"},
{"name":"DHRUVA IYER","roll":"245805084"},
{"name":"DHRUVISHI AMIN","roll":"245805104"},
{"name":"DISHA KURKURI","roll":"245805068"},
{"name":"DIYA N REDDY","roll":"245805024"},
{"name":"Hariom Anand","roll":"123126213"},
{"name":"HARIT RAVAL","roll":"245805266"},
{"name":"ISHAAN THAPLIYAL","roll":"245805238"},
{"name":"K RUTHIKA REDDY","roll":"245805344"},
{"name":"KARAMSETTY SRI PRANEETHA","roll":"245805006"},
{"name":"Karthik Akhilesh Kodukula","roll":"245805017"},
{"name":"MAITHRI S","roll":"245805184"},
{"name":"MALHAR SRIVATSAV","roll":"245805116"},
{"name":"MANASA S","roll":"245805108"},
{"name":"MANYA SINHA","roll":"245805094"},
{"name":"MANYA VISHWANATH","roll":"245890106"},
{"name":"MULAKALA ADWAITH","roll":"245805322"},
{"name":"MULAKALA AMRITH","roll":"245890060"},
{"name":"NITHYASHREE HEBBAR","roll":"245890110"},
{"name":"PAIDISETTY HARSHITA","roll":"245805030"},
{"name":"PARTHA PRATIM BAISHYA","roll":"245805254"},
{"name":"PARTHAV U","roll":"245805188"},
{"name":"PASUPULETI VEERAMANI TEJA","roll":"245805086"},
{"name":"Prabhav Chanakya Boddu","roll":"245805021"},
{"name":"PRANAV NAIDU KOSURI","roll":"245890046"},
{"name":"PRANSHU THAKKAR","roll":"245805158"},
{"name":"RADHIKA J PODUVAL","roll":"245890096"},
{"name":"raghaav agarwal","roll":"123148567"},
{"name":"RIMJHIM PHARASWAL","roll":"245805286"},
{"name":"RITIKA GAUTAM","roll":"245805192"},
{"name":"RITWIK GUPTA","roll":"245805240"},
{"name":"S Darshan","roll":"245805023"},
{"name":"SAARTHAK PATWAL","roll":"245805054"},
{"name":"SAATVIK DAS","roll":"245805096"},
{"name":"SAHAJ KHANNA","roll":"245805098"},
{"name":"SATHWIK HEJAMADY BHAT","roll":"245805366"},
{"name":"SHLOK DINESH ARORA","roll":"245805372"},
{"name":"SHREYA JAIN","roll":"245805046"},
{"
